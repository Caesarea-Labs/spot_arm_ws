<?xml version="1.0"?>
<robot name="spot" xmlns:xacro="http://www.ros.org/wiki/xacro">
    <xacro:macro name="load_spot" params="
    arm:=true
    tf_prefix">
        <!-- Body -->
        <link name="${tf_prefix}body">
            <visual>
                <geometry>
                    <mesh filename="file://$(find spot_description)/meshes/base/visual/body.dae" />
                </geometry>
            </visual>
            <collision>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/collision/body_collision.obj" />
                </geometry>
            </collision>
        </link>

        <link name="${tf_prefix}base_link">
            <inertial>
                <origin rpy="0.0 0.0 0.0"
                    xyz="0.006394396536052227 -9.812158532440662e-05 0.0009113792330026627" />
                <mass value="32.86" />
                <inertia ixx="0.13143999874591827" ixy="0.0" ixz="0.0" iyy="0.13143999874591827"
                    iyz="0.0" izz="0.13143999874591827" />
            </inertial>
        </link>
        <joint name="${tf_prefix}base_link_joint" type="fixed">
            <origin xyz="0 0 0" rpy="0 0 0" />
            <parent link="${tf_prefix}body" />
            <child link="${tf_prefix}base_link" />
        </joint>

        <link name="${tf_prefix}front_rail">
            <inertial>
                <origin rpy="0. 0. 0." xyz="0. 0. 0." />
                <mass value="1.0e-6" />
                <inertia ixx="1.0e-9" ixy="0.0" ixz="0.0" iyy="1.0e-9" iyz="0.0" izz="1.0e-9" />
            </inertial>
        </link>
        <joint name="${tf_prefix}front_rail_joint" type="fixed">
            <origin xyz="0.223 0 0.0805" rpy="0 0 0" />
            <parent link="${tf_prefix}body" />
            <child link="${tf_prefix}front_rail" />
        </joint>

        <link name="${tf_prefix}rear_rail">
            <inertial>
                <origin rpy="0. 0. 0." xyz="0. 0. 0." />
                <mass value="1.0e-6" />
                <inertia ixx="1.0e-9" ixy="0.0" ixz="0.0" iyy="1.0e-9" iyz="0.0" izz="1.0e-9" />
            </inertial>
        </link>
        <joint name="${tf_prefix}rear_rail_joint" type="fixed">
            <origin xyz="-0.223 0 0.0805" rpy="0 0 0" />
            <parent link="${tf_prefix}body" />
            <child link="${tf_prefix}rear_rail" />
        </joint>

        <!-- ARM -->
        <link name="${tf_prefix}arm_link_sh0">
          <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
              <mesh filename="file://$(find spot_description)/meshes/arm/visual/arm_link_sh0.obj" />
            </geometry>
            <material name="arm_link_sh0">
              <color rgba="0.2 0.2 0.2 1" />
            </material>
          </visual>
          <collision>
            <geometry>
              <mesh filename="file://$(find spot_description)/meshes/arm/collision/arm_link_sh0_base.obj" />
            </geometry>
          </collision>
          <collision>
            <geometry>
              <mesh filename="file://$(find spot_description)/meshes/arm/collision/arm_link_sh0_left_motor.obj" />
            </geometry>
          </collision>
          <collision>
            <geometry>
              <mesh filename="file://$(find spot_description)/meshes/arm/collision/arm_link_sh0_right_motor.obj" />
            </geometry>
          </collision>
          <inertial>
            <origin rpy="0.0013490340912847287 -0.15433618253071657 0.0066354181456347305"
              xyz="-0.012372709810733795 -4.5211403630673885e-05 -0.02103196457028389" />
            <mass value="2.3364000000000003" />
            <inertia ixx="0.009014303010689815" ixy="0.0" ixz="0.0" iyy="0.005835102417829581" iyz="0.0"
              izz="0.00778747846359954" />
          </inertial>
        </link>
        <joint name="${tf_prefix}arm_sh0" type="revolute">
          <origin xyz="0.292 0.0 0.188" rpy="0 0 0" />
          <axis xyz="0 0 1" />
          <parent link="${tf_prefix}base_link" />
          <child link="${tf_prefix}arm_link_sh0" />
          <limit effort="1000" velocity="1000.00" lower="-2.61799387799149441136"
            upper="3.14159265358979311599" />
        </joint>
        <gazebo reference="${tf_prefix}arm_link_sh0">
            <material>Gazebo/Gray</material>
        </gazebo>

        <link name="${tf_prefix}arm_link_sh1">
          <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
              <mesh filename="file://$(find spot_description)/meshes/arm/visual/arm_link_sh1.obj" />
            </geometry>
            <material name="arm_link_sh1">
              <color rgba="0.2 0.2 0.2 1" />
            </material>
          </visual>
          <inertial>
            <origin rpy="0.009910032200701302 -0.5123007314267984 0.002209016500439809"
              xyz="2.4176391889341176e-05 2.4116111490002368e-06 -1.0059113265015185e-05" />
            <mass value="0.2596" />
            <inertia ixx="0.00020292766231464653" ixy="0.0" ixz="0.0" iyy="0.00017078637725384855"
              iyz="0.0" izz="0.00020384964230406682" />
          </inertial>
        </link>
        <joint name="${tf_prefix}arm_sh1" type="revolute">
          <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
          <axis xyz="0 1 0" />
          <parent link="${tf_prefix}arm_link_sh0" />
          <child link="${tf_prefix}arm_link_sh1" />
          <!-- <limit effort="1000" velocity="1000.00" lower="-0.52359877559829881565"
          upper="3.14159265358979311599"/> -->
          <limit effort="1000" velocity="1000.00" lower="-3.14159265358979311599"
            upper="0.52359877559829881565" />
        </joint>
        <gazebo reference="${tf_prefix}arm_link_sh1">
            <material>Gazebo/Gray</material>
        </gazebo>

        <link name="${tf_prefix}arm_link_hr0">
          <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
              <mesh filename="file://$(find spot_description)/meshes/arm/visual/arm_link_hr0.obj" />
            </geometry>
            <material name="arm_link_hr0">
              <color rgba="0.2 0.2 0.2 1" />
            </material>
          </visual>
          <collision>
            <geometry>
              <mesh filename="file://$(find spot_description)/meshes/arm/collision/arm_link_hr0.obj" />
            </geometry>
          </collision>
          <inertial>
            <origin rpy="-0.01179850657706405 0.0002834144901480151 -0.02372295500868482"
              xyz="0.17047011852264404 -0.0019251034827902913 4.483893280848861e-05" />
            <mass value="1e-06" />
            <inertia ixx="6.312631747339145e-10" ixy="0.0" ixz="0.0" iyy="1.1487063558949979e-08"
              iyz="0.0" izz="1.161105128440526e-08" />
          </inertial>
        </link>
        <joint name="${tf_prefix}arm_hr0" type="fixed">
          <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
          <axis xyz="1 0 0" />
          <parent link="${tf_prefix}arm_link_sh1" />
          <child link="${tf_prefix}arm_link_hr0" />
          <limit effort="1000" velocity="1000.00" lower="-1e6" upper="1e6" />
        </joint>

        <gazebo reference="${tf_prefix}arm_link_hr0">
            <material>Gazebo/Gray</material>
        </gazebo>

        <link name="${tf_prefix}arm_link_el0">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/visual/arm_link_el0.obj" />
        </geometry>
        <material name="arm_link_el0">
          <color rgba="0.2 0.2 0.2 1" />
        </material>
      </visual>
      <collision>
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/collision/arm_link_el0.obj" />
        </geometry>
      </collision>
      <inertial>
        <origin rpy="-0.004185887288594259 -0.6136269547775202 -0.0004619387581783485"
          xyz="0.0553741455078125 0.00023603376757819206 0.04827198013663292" />
        <mass value="0.725" />
        <inertia ixx="0.0008215365829160558" ixy="0.0" ixz="0.0" iyy="0.0020047889807066404"
          iyz="0.0" izz="0.0019722797759789395" />
      </inertial>
    </link>
        <joint name="${tf_prefix}arm_el0" type="revolute">
      <origin xyz="0.3385 0 0" rpy="0 0 0" />
      <axis xyz="0 1 0" />
      <parent link="${tf_prefix}arm_link_sh1" />
      <child link="${tf_prefix}arm_link_el0" />
      <limit effort="1000" velocity="1000.00" lower="0" upper="3.14159265358979311599" />
    </joint>
        <gazebo reference="${tf_prefix}arm_link_el0">
        <material>Gazebo/Gray</material>
    </gazebo>

        <link name="${tf_prefix}arm_link_el1">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/visual/arm_link_el1.obj" />
        </geometry>
        <material name="arm_link_el1">
          <color rgba="0.2 0.2 0.2 1" />
        </material>
      </visual>
      <collision>
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/collision/arm_link_el1_main.obj" />
        </geometry>
      </collision>
      <collision>
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/collision/arm_link_el1_lip.obj" />
        </geometry>
      </collision>
      <inertial>
        <origin rpy="-0.15027374227250867 -0.0007874585461915551 0.003728225436950172"
          xyz="-0.1257835328578949 -0.013684478588402271 0.00010157923679798841" />
        <mass value="0.725" />
        <inertia ixx="0.0006254807525240598" ixy="0.0" ixz="0.0" iyy="0.004402454711936095"
          iyz="0.0" izz="0.004515915146038191" />
      </inertial>
    </link>
        <joint name="${tf_prefix}arm_el1" type="revolute">
      <origin xyz="0.40330 0.0 0.0750" rpy="0 0 0" />
      <axis xyz="1 0 0" />
      <parent link="${tf_prefix}arm_link_el0" />
      <child link="${tf_prefix}arm_link_el1" />
      <limit effort="1000" velocity="1000.00" lower="-2.79252680319092716487"
        upper="2.79252680319092716487" />
    </joint>
        <gazebo reference="${tf_prefix}arm_link_el1">
        <material>Gazebo/Gray</material>
    </gazebo>

        <link name="${tf_prefix}arm_link_wr0">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/visual/arm_link_wr0.obj" />
        </geometry>
        <material name="arm_link_wr0">
          <color rgba="0.2 0.2 0.2 1" />
        </material>
      </visual>
      <collision>
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/collision/arm_link_wr0.obj" />
        </geometry>
      </collision>
      <inertial>
        <origin rpy="-0.4951534907966386 0.0033720434077784134 0.020027599337697932"
          xyz="0.008210677653551102 -0.012051000259816647 3.143483627354726e-05" />
        <mass value="0.98" />
        <inertia ixx="0.0009851320696685427" ixy="0.0" ixz="0.0" iyy="0.0008916145765810678"
          iyz="0.0" izz="0.0012354892751854467" />
      </inertial>
    </link>
        <joint name="${tf_prefix}arm_wr0" type="revolute">
      <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
      <axis xyz="0 1 0" />
      <parent link="${tf_prefix}arm_link_el1" />
      <child link="${tf_prefix}arm_link_wr0" />
      <limit effort="1000" velocity="1000.00" lower="-1.83259571459404613236"
        upper="1.83259571459404613236" />
    </joint>
        <gazebo reference="${tf_prefix}arm_link_wr0">
            <material>Gazebo/Gray</material>
        </gazebo>

        <link name="${tf_prefix}arm_link_wr1">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/visual/arm_link_wr1.obj" />
        </geometry>
        <material name="arm_link_wr1">
          <color rgba="0.2 0.2 0.2 1" />
        </material>
      </visual>
      <collision>
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/collision/arm_link_wr1.obj" />
        </geometry>
      </collision>
      <collision>
      <geometry>
        <mesh filename="file://$(find spot_description)/meshes/arm/collision/front_jaw.obj" />
      </geometry>
      </collision>
      <collision>
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/collision/middle_jaw.obj" />
        </geometry>
      </collision>
      <collision>
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/collision/jaw_tooth.obj" />
        </geometry>
      </collision>
      <inertial>
        <origin rpy="0.006393076449033863 0.2928526604761865 -0.022814984050994802"
          xyz="0.12516802549362183 0.00010137435310753062 -0.013997982256114483" />
        <mass value="0.785" />
        <inertia ixx="0.00076741362048185" ixy="0.0" ixz="0.0" iyy="0.0017628124054271809" iyz="0.0"
          izz="0.0016818105865345951" />
      </inertial>
    </link>
        <joint name="${tf_prefix}arm_wr1" type="revolute">
      <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
      <axis xyz="1 0 0" />
      <parent link="${tf_prefix}arm_link_wr0" />
      <child link="${tf_prefix}arm_link_wr1" />
      <limit effort="1000" velocity="1000.00" lower="-2.87979326579064354163"
        upper="2.87979326579064354163" />
    </joint>
        <gazebo reference="${tf_prefix}arm_link_wr1">
        <material>Gazebo/Gray</material>
    </gazebo>

        <link name="${tf_prefix}arm_link_fngr">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/visual/arm_link_fngr.obj" />
        </geometry>
        <material name="arm_link_fngr">
          <color rgba="0.2 0.2 0.2 1" />
        </material>
      </visual>
      <collision>
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/collision/left_hinge.obj" />
        </geometry>
      </collision>
      <collision>
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/collision/left_finger.obj" />
        </geometry>
      </collision>
      <collision>
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/collision/left_tooth.obj" />
        </geometry>
      </collision>
      <collision>
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/collision/right_hinge.obj" />
        </geometry>
      </collision>
      <collision>
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/collision/right_finger.obj" />
        </geometry>
      </collision>
      <collision>
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/collision/right_tooth.obj" />
        </geometry>
      </collision>
      <inertial>
        <origin rpy="0.0003416659657240473 0.3751670012784243 -0.004058661249495721"
          xyz="0.04787873849272728 -0.00020676758140325546 -0.01628788933157921" />
        <mass value="0.2" />
        <inertia ixx="0.0001439963634171048" ixy="0.0" ixz="0.0" iyy="0.0003007126997998294"
          iyz="0.0" izz="0.0003912783268020657" />
      </inertial>
    </link>
        <joint name="${tf_prefix}arm_f1x" type="revolute">
      <origin xyz="0.11745 0 0.014820" rpy="0 0 0" />
      <axis xyz="0.0 1.0 0.0" />
      <parent link="${tf_prefix}arm_link_wr1" />
      <child link="${tf_prefix}arm_link_fngr" />
      <limit effort="1000" velocity="1000.00" lower="-1.57" upper="0.0" />
    </joint>
        <gazebo reference="${tf_prefix}arm_link_fngr">
        <material>Gazebo/DarkGrey</material>
    </gazebo>

         <!-- CL gripper -->

        <link name="${tf_prefix}griper_base_link">
            <visual>
                <origin xyz="0.12 -0.05 -0.07" rpy="1.57 0 1.57" />
                    <geometry>
                        <mesh filename="file://$(find spot_description)/meshes/arm/visual/base_grip.stl" scale="1000 1000 1000"/>
                    </geometry>
                    <material name="arm_link_wr1">
                        <color rgba="0.2 0.2 0.2 1" />
                    </material>
            </visual>
            <collision>
                <geometry>
                    <mesh filename="file://$(find spot_description)/meshes/arm/collision/base_grip.stl" scale="1000 1000 1000"/>
                </geometry>
            </collision>
            <inertial>
            <origin rpy="0.006393076449033863 0.2928526604761865 -0.022814984050994802"
                xyz="0.12516802549362183 0.00010137435310753062 -0.013997982256114483" />
            <mass value="0.785" />
            <inertia ixx="0.00076741362048185" ixy="0.0" ixz="0.0" iyy="0.0017628124054271809" iyz="0.0"
                izz="0.0016818105865345951" />
            </inertial>
        </link>
        <joint name="${tf_prefix}grip_base_joint" type="fixed">
            <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
            <axis xyz="1 0 0" />
            <parent link="${tf_prefix}arm_link_wr1" />
            <child link="${tf_prefix}griper_base_link" />
            <limit effort="1000" velocity="1000.00" lower="-2.87979326579064354163"
                upper="2.87979326579064354163" />
        </joint>
        <gazebo reference="${tf_prefix}griper_base_link">
            <material>Gazebo/DarkGrey</material>
        </gazebo>

        <link name="${tf_prefix}left_finger_link">
        <visual>
        <origin xyz="0.118 0.0 -0.07" rpy="1.57 0 0" />
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/visual/left_finger.stl" scale="1000 1000 1000"/>
        </geometry>
        <material name="arm_link_wr1">
          <color rgba="0.2 0.2 0.2 1" />
        </material>
      </visual>
      <collision>
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/collision/left_finger.stl" scale="1000 1000 1000"/>
        </geometry>
      </collision>

      <inertial>
        <origin rpy="0.006393076449033863 0.2928526604761865 -0.022814984050994802"
          xyz="0.12516802549362183 0.00010137435310753062 -0.013997982256114483" />
        <mass value="0.785" />
        <inertia ixx="0.00076741362048185" ixy="0.0" ixz="0.0" iyy="0.0017628124054271809" iyz="0.0"
          izz="0.0016818105865345951" />
      </inertial>
    </link>
        <joint name="left_finger_joint" type="prismatic">
            <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
            <axis xyz="0 1 0" />
            <parent link="${tf_prefix}griper_base_link" />
            <child link="${tf_prefix}left_finger_link" />
            <limit effort="1000" velocity="1000.00" lower="-0.03"
                upper="0.0" />
        </joint>
        <gazebo reference="${tf_prefix}left_finger_link">
            <material>Gazebo/DarkGrey</material>
        </gazebo>

        <link name="${tf_prefix}right_finger_link">
      <visual>
        <origin xyz="0.118 0.02 -0.07" rpy="1.57 0 0" />
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/visual/right_finger.stl" scale="1000 1000 1000"/>
        </geometry>
        <material name="arm_link_wr1">
          <color rgba="0.2 0.2 0.2 1" />
        </material>
      </visual>
      <collision>
        <geometry>
          <mesh filename="file://$(find spot_description)/meshes/arm/collision/right_finger.stl" scale="1000 1000 1000"/>
        </geometry>
      </collision>

      <inertial>
        <origin rpy="0.006393076449033863 0.2928526604761865 -0.022814984050994802"
          xyz="0.12516802549362183 0.00010137435310753062 -0.013997982256114483" />
        <mass value="0.785" />
        <inertia ixx="0.00076741362048185" ixy="0.0" ixz="0.0" iyy="0.0017628124054271809" iyz="0.0"
          izz="0.0016818105865345951" />
      </inertial>
    </link>
        <joint name="right_finger_joint" type="prismatic">
            <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
            <axis xyz="0 1 0" />
            <parent link="${tf_prefix}griper_base_link" />
            <child link="${tf_prefix}right_finger_link" />
            <limit effort="1000" velocity="1000.00" lower="-0.0" upper="0.03" />
        </joint>
        <gazebo reference="${tf_prefix}right_finger_link">
            <material>Gazebo/DarkGrey</material>
        </gazebo>

        <!-- Extrematies -->
        <link name="${tf_prefix}front_left_hip">
            <visual>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/visual/front_left_hip.dae" />
                </geometry>
            </visual>
            <inertial>
                <origin rpy="-0.716521349312305 0.02956473059648479 0.03655230014702582"
                    xyz="-0.005374345928430557 0.012841847725212574 9.875232353806496e-05" />
                <mass value="1.68" />
                <inertia ixx="0.0021147398873455382" ixy="0.0" ixz="0.0" iyy="0.0018129577956607131"
                    iyz="0.0" izz="0.002265435737304666" />
            </inertial>
        </link>
        <joint name="${tf_prefix}front_left_hip_x" type="fixed">
            <origin xyz="0.29785 0.05500 0.00000" rpy="0 0 0" />
            <axis xyz="1 0 0" />
            <parent link="${tf_prefix}body" />
            <child link="${tf_prefix}front_left_hip" />
            <limit effort="1000" velocity="1000.00" lower="-0.78539816339744827899"
                upper="0.78539816339744827899" />
        </joint>
        <link name="${tf_prefix}front_left_upper_leg">
            <visual>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/visual/front_left_upper_leg.dae" />
                </geometry>
            </visual>
            <collision>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/collision/left_upper_leg_collision.obj" />
                </geometry>
            </collision>
            <inertial>
                <origin rpy="-0.26437828203369795 -0.04853174570753804 0.024046963096353124"
                    xyz="0.005142373498529196 -0.0024323679972440004 -0.12100915610790253" />
                <mass value="2.34" />
                <inertia ixx="0.02755964961185679" ixy="0.0" ixz="0.0" iyy="0.027354914287651046"
                    iyz="0.0" izz="0.002848145546743553" />
            </inertial>
        </link>
        <joint name="${tf_prefix}front_left_hip_y" type="fixed">
            <origin xyz="0.0 0.110945 0.0" rpy="0. 0.5 0" />
            <axis xyz="0 1 0" />
            <parent link="${tf_prefix}front_left_hip" />
            <child link="${tf_prefix}front_left_upper_leg" />
            <limit effort="1000" velocity="1000.00" lower="-0.89884456477707963539"
                upper="2.2951079663725435509" />
        </joint>
        <link name="${tf_prefix}front_left_lower_leg">
            <visual>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/visual/front_left_lower_leg.dae" />
                </geometry>
            </visual>
            <collision>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/collision/left_lower_leg_collision.obj" />
                </geometry>
            </collision>
            <collision>
                <origin xyz="0.0 0.0 -0.3365" rpy="0 0 0" />
                <geometry>
                    <sphere radius="0.036"/>
                </geometry>
            </collision>
            <inertial>
                <origin rpy="-0.007266925694167092 -0.009591807116834161 0.00035255970529224356"
                    xyz="0.00225794012658298 4.607596201822162e-05 -0.1800822913646698" />
                <mass value="0.35" />
                <inertia ixx="0.003999022654901177" ixy="0.0" ixz="0.0" iyy="0.0040503157598010785"
                    iyz="0.0" izz="0.0001493402097647426" />
            </inertial>
        </link>
        <joint name="${tf_prefix}front_left_knee" type="fixed">
            <origin xyz="0.025 0.000 -0.3205" rpy="0 -1 0" />
            <axis xyz="0 1 0" />
            <parent link="${tf_prefix}front_left_upper_leg" />
            <child link="${tf_prefix}front_left_lower_leg" />
            <limit effort="1000" velocity="1000.00" lower="-2.7929" upper="-0.254801" />
        </joint>
        <link name="${tf_prefix}front_right_hip">
            <visual>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/visual/front_right_hip.dae" />
                </geometry>
            </visual>
            <inertial>
                <origin rpy="0.7165213493123055 -0.02956473059648479 0.03655230014702582"
                    xyz="-0.005374345928430557 -0.012841847725212574 -9.875232353806496e-05" />
                <mass value="1.68" />
                <inertia ixx="0.0021147398873455382" ixy="0.0" ixz="0.0" iyy="0.0018129577956607131"
                    iyz="0.0" izz="0.002265435737304666" />
            </inertial>
        </link>
        <joint name="${tf_prefix}front_right_hip_x" type="fixed">
            <origin xyz="0.29785 -0.05500 0.00000" rpy="0 0 0" />
            <axis xyz="1 0 0" />
            <parent link="${tf_prefix}body" />
            <child link="${tf_prefix}front_right_hip" />
            <limit effort="1000" velocity="1000.00" lower="-0.78539816339744827899"
                upper="0.78539816339744827899" />
        </joint>
        <link name="${tf_prefix}front_right_upper_leg">
            <visual>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/visual/front_right_upper_leg.dae" />
                </geometry>
            </visual>
            <collision>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/collision/right_upper_leg_collision.obj" />
                </geometry>
            </collision>
            <inertial>
                <origin rpy="0.2643905306958363 -0.04853174688302708 -0.024046943559834943"
                    xyz="0.005142373498529196 0.0024323677644133568 -0.12100915610790253" />
                <mass value="2.34" />
                <inertia ixx="0.02755964678927691" ixy="0.0" ixz="0.0" iyy="0.02735491706466737"
                    iyz="0.0" izz="0.0028481453594764797" />
            </inertial>
        </link>
        <joint name="${tf_prefix}front_right_hip_y" type="fixed">
            <origin xyz="0.0 -0.110945 0.0" rpy="0 0.5 0" />
            <axis xyz="0 1 0" />
            <parent link="${tf_prefix}front_right_hip" />
            <child link="${tf_prefix}front_right_upper_leg" />
            <limit effort="1000" velocity="1000.00" lower="-0.89884456477707963539"
                upper="2.2951079663725435509" />
        </joint>
        <link name="${tf_prefix}front_right_lower_leg">
            <visual>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/visual/front_right_lower_leg.dae" />
                </geometry>
            </visual>
            <collision>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/collision/right_lower_leg_collision.obj" />
                </geometry>
            </collision>
            <collision>
                <origin xyz="0.0 0.0 -0.3365" rpy="0 0 0" />
                <geometry>
                    <sphere radius="0.036"/>
                </geometry>
            </collision>
            <inertial>
                <origin rpy="-0.007266925694167092 -0.009591807116834161 0.00035255970529224356"
                    xyz="0.00225794012658298 4.607596201822162e-05 -0.1800822913646698" />
                <mass value="0.35" />
                <inertia ixx="0.003999022654901177" ixy="0.0" ixz="0.0" iyy="0.0040503157598010785"
                    iyz="0.0" izz="0.0001493402097647426" />
            </inertial>
        </link>
        <joint name="${tf_prefix}front_right_knee" type="fixed">
            <origin xyz="0.025 0.000 -0.3205" rpy="0 -1 0" />
            <axis xyz="0 1 0" />
            <parent link="${tf_prefix}front_right_upper_leg" />
            <child link="${tf_prefix}front_right_lower_leg" />
            <limit effort="1000" velocity="1000.00" lower="-2.7929" upper="-0.247563" />
        </joint>
        <link name="${tf_prefix}rear_left_hip">
            <visual>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/visual/rear_left_hip.dae" />
                </geometry>
            </visual>
            <inertial>
                <origin rpy="0.7165213493123055 -0.02956473059648479 0.03655230014702582"
                    xyz="-0.005374345928430557 -0.012841847725212574 -9.875232353806496e-05" />
                <mass value="1.68" />
                <inertia ixx="0.0021147398873455382" ixy="0.0" ixz="0.0" iyy="0.0018129577956607131"
                    iyz="0.0" izz="0.002265435737304666" />
            </inertial>
        </link>
        <joint name="${tf_prefix}rear_left_hip_x" type="fixed">
            <origin xyz="-0.29785 0.05500 0.00000" rpy="0 0 0" />
            <axis xyz="1 0 0" />
            <parent link="${tf_prefix}body" />
            <child link="${tf_prefix}rear_left_hip" />
            <limit effort="1000" velocity="1000.00" lower="-0.78539816339744827899"
                upper="0.78539816339744827899" />
        </joint>
        <link name="${tf_prefix}rear_left_upper_leg">
            <visual>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/visual/rear_left_upper_leg.dae" />
                </geometry>
            </visual>
            <collision>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/collision/left_upper_leg_collision.obj" />
                </geometry>
            </collision>
            <inertial>
                <origin rpy="-0.26437828203369795 -0.04853174570753804 0.024046963096353124"
                    xyz="0.005142373498529196 -0.0024323679972440004 -0.12100915610790253" />
                <mass value="2.34" />
                <inertia ixx="0.02755964961185679" ixy="0.0" ixz="0.0" iyy="0.027354914287651046"
                    iyz="0.0" izz="0.002848145546743553" />
            </inertial>
        </link>
        <joint name="${tf_prefix}rear_left_hip_y" type="fixed">
            <origin xyz="0.0 0.110945 0.0" rpy="0 0.5 0" />
            <axis xyz="0 1 0" />
            <parent link="${tf_prefix}rear_left_hip" />
            <child link="${tf_prefix}rear_left_upper_leg" />
            <limit effort="1000" velocity="1000.00" lower="-0.89884456477707963539"
                upper="2.2951079663725435509" />
        </joint>
        <link name="${tf_prefix}rear_left_lower_leg">
            <visual>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/visual/rear_left_lower_leg.dae" />
                </geometry>
            </visual>
            <collision>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/collision/left_lower_leg_collision.obj" />
                </geometry>
            </collision>
            <collision>
                <origin xyz="0.0 0.0 -0.3365" rpy="0 0 0" />
                <geometry>
                    <sphere radius="0.036"/>
                </geometry>
            </collision>
            <inertial>
                <origin rpy="-0.007266925694167092 -0.009591807116834161 0.00035255970529224356"
                    xyz="0.00225794012658298 4.607596201822162e-05 -0.1800822913646698" />
                <mass value="0.35" />
                <inertia ixx="0.003999022654901177" ixy="0.0" ixz="0.0" iyy="0.0040503157598010785"
                    iyz="0.0" izz="0.0001493402097647426" />
            </inertial>
        </link>
        <joint name="${tf_prefix}rear_left_knee" type="fixed">
            <origin xyz="0.025 0.000 -0.3205" rpy="0 -1 0" />
            <axis xyz="0 1 0" />
            <parent link="${tf_prefix}rear_left_upper_leg" />
            <child link="${tf_prefix}rear_left_lower_leg" />
            <limit effort="1000" velocity="1000.00" lower="-2.7929" upper="-0.267153" />
        </joint>
        <link name="${tf_prefix}rear_right_hip">
            <visual>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/visual/rear_right_hip.dae" />
                </geometry>
            </visual>
            <inertial>
                <origin rpy="0.7165213493123055 -0.02956473059648479 0.03655230014702582"
                    xyz="-0.005374345928430557 -0.012841847725212574 -9.875232353806496e-05" />
                <mass value="1.68" />
                <inertia ixx="0.0021147398873455382" ixy="0.0" ixz="0.0" iyy="0.0018129577956607131"
                    iyz="0.0" izz="0.002265435737304666" />
            </inertial>
        </link>
        <joint name="${tf_prefix}rear_right_hip_x" type="fixed">
            <origin xyz="-0.29785 -0.05500 0.00000" rpy="0 0 0" />
            <axis xyz="1 0 0" />
            <parent link="${tf_prefix}body" />
            <child link="${tf_prefix}rear_right_hip" />
            <limit effort="1000" velocity="1000.00" lower="-0.78539816339744827899"
                upper="0.78539816339744827899" />
        </joint>
        <link name="${tf_prefix}rear_right_upper_leg">
            <visual>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/visual/rear_right_upper_leg.dae" />
                </geometry>
            </visual>
            <collision>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/collision/right_upper_leg_collision.obj" />
                </geometry>
            </collision>
            <inertial>
                <origin rpy="0.2643905306958363 -0.04853174688302708 -0.024046943559834943"
                    xyz="0.005142373498529196 0.0024323677644133568 -0.12100915610790253" />
                <mass value="2.34" />
                <inertia ixx="0.02755964678927691" ixy="0.0" ixz="0.0" iyy="0.02735491706466737"
                    iyz="0.0" izz="0.0028481453594764797" />
            </inertial>
        </link>
        <joint name="${tf_prefix}rear_right_hip_y" type="fixed">
            <origin xyz="0.0 -0.110945 0.0" rpy="0 0.5 0" />
            <axis xyz="0 1 0" />
            <parent link="${tf_prefix}rear_right_hip" />
            <child link="${tf_prefix}rear_right_upper_leg" />
            <limit effort="1000" velocity="1000.00" lower="-0.89884456477707963539"
                upper="2.2951079663725435509" />
        </joint>
        <link name="${tf_prefix}rear_right_lower_leg">
            <visual>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/visual/rear_right_lower_leg.dae" />
                </geometry>
            </visual>
            <collision>
                <geometry>
                    <mesh
                        filename="file://$(find spot_description)/meshes/base/collision/right_lower_leg_collision.obj" />
                </geometry>
            </collision>
            <collision>
                <origin xyz="0.0 0.0 -0.3365" rpy="0 0 0" />
                <geometry>
                    <sphere radius="0.036"/>
                </geometry>
            </collision>
            <inertial>
                <origin rpy="-0.007266925694167092 -0.009591807116834161 0.00035255970529224356"
                    xyz="0.00225794012658298 4.607596201822162e-05 -0.1800822913646698" />
                <mass value="0.35" />
                <inertia ixx="0.003999022654901177" ixy="0.0" ixz="0.0" iyy="0.0040503157598010785"
                    iyz="0.0" izz="0.0001493402097647426" />
            </inertial>
        </link>
        <joint name="${tf_prefix}rear_right_knee" type="fixed">
            <origin xyz="0.025 0.000 -0.3205" rpy="0 -1 0" />
            <axis xyz="0 1 0" />
            <parent link="${tf_prefix}rear_right_upper_leg" />
            <child link="${tf_prefix}rear_right_lower_leg" />
            <limit effort="1000" velocity="1000.00" lower="-2.7929" upper="-0.257725" />
        </joint>


        <!-- Control plugins-->

        <ros2_control name="GazeboSystem" type="system">
                <hardware>
                    <plugin>gazebo_ros2_control/GazeboSystem</plugin>
                </hardware>
                <joint name="${tf_prefix}arm_sh0">
                    <command_interface name="position">

                    </command_interface>
                    <state_interface name="position">
                        <param name="initial_value">0.0</param>
                    </state_interface>
                    <state_interface name="velocity"/>
                </joint>
                <joint name="${tf_prefix}arm_sh1">
                    <command_interface name="position">

                    </command_interface>
                    <state_interface name="position">
                        <param name="initial_value">-3.11</param>
                    </state_interface>
                    <state_interface name="velocity"/>
                </joint>
                <joint name="${tf_prefix}arm_el0">
                    <command_interface name="position">

                    </command_interface>
                    <state_interface name="position">
                         <param name="initial_value">3.11</param>
                    </state_interface>
                    <state_interface name="velocity"/>
                </joint>
                <joint name="${tf_prefix}arm_el1">
                    <command_interface name="position">
                    </command_interface>
                    <state_interface name="position">
                        <param name="initial_value">0.0</param>
                    </state_interface>
                    <state_interface name="velocity"/>
                </joint>
                <joint name="${tf_prefix}arm_wr0">
                    <command_interface name="position">

                    </command_interface>
                    <state_interface name="position">
                        <param name="initial_value">0.0</param>
                    </state_interface>
                    <state_interface name="velocity"/>
                </joint>
                <joint name="${tf_prefix}arm_wr1">
                    <command_interface name="position">

                    </command_interface>
                    <state_interface name="position">
                        <param name="initial_value">0.0</param>
                    </state_interface>
                    <state_interface name="velocity"/>
                </joint>
                <joint name="${tf_prefix}arm_f1x">
                    <command_interface name="position">

                    </command_interface>
                    <state_interface name="position">
                        <param name="initial_value">0.0</param>
                    </state_interface>
                    <state_interface name="velocity"/>
                </joint>
                <joint name="left_finger_joint">
                    <command_interface name="position">

                    </command_interface>
                    <state_interface name="position">
                        <param name="initial_value">0.0</param>
                    </state_interface>
                    <state_interface name="velocity"/>
                </joint>
                <joint name="right_finger_joint">
                    <command_interface name="position">
                    </command_interface>
                    <state_interface name="position">
                        <param name="initial_value">0.0</param>
                    </state_interface>
                    <state_interface name="velocity"/>
                </joint>

     </ros2_control>

        <gazebo>
            <plugin filename="libgazebo_ros2_control.so" name="gazebo_ros2_control">
                <robot_sim_type>gazebo_ros2_control/GazeboSystem</robot_sim_type>
                <parameters>$(find arm_moveit_config)/config/ros2_controllers.yaml </parameters>
            </plugin>
        </gazebo>

        <!-- Sensor plaugins-->
        <link name="pointcloud_link">
            <visual>
                <geometry>
                    <sphere radius="0.010"/>
                </geometry>
            </visual>
        </link>

  <joint name="pointcloud_link_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.151 0.0 0.02"/>
    <parent link="arm_link_wr1"/>
    <child link="pointcloud_link"/>
    <axis xyz="0 0 0"/>
  </joint>

  <gazebo reference="pointcloud_link">
      <sensor type="ray" name="pointcloud_sensor">
          <ray>
          <scan>
              <horizontal>
               <samples>10</samples>
               <resolution>1</resolution>
               <min_angle>-0.014835</min_angle>
               <max_angle>0.014835</max_angle>
            </horizontal>
            <vertical>
               <samples>10</samples>
               <resolution>1</resolution>
               <min_angle>-0.014835</min_angle>
               <max_angle>0.014835</max_angle>
            </vertical>
          </scan>
          <range>
              <min>0.10</min>
              <max>5.0</max>
              <resolution>0.001</resolution>
          </range>
          <!-- Using gazebo's noise instead of plugin's -->
          <noise>
              <type>gaussian</type>
              <mean>0.0</mean>
              <stddev>0.001</stddev>
          </noise>
          </ray>
          <!-- Using gazebo's update rate instead of plugin's -->
          <update_rate>30</update_rate>
          <plugin name="gazebo_ros_block_laser_controller" filename="libgazebo_ros_ray_sensor.so">
          <!-- Change namespace and output topic so published topic is /rrbot/laser/pointcloud -->
          <ros>
              <namespace>spot</namespace>
              <argument>~/out:=pointcloud</argument>
          </ros>
          <!-- Set output to sensor_msgs/PointCloud to get same output type as gazebo_ros_block_laser -->
          <output_type>sensor_msgs/PointCloud</output_type>
          <frame_name>pointcloud_link</frame_name>

          <!-- min_intensity instead of hokuyoMinIntensity -->
          <min_intensity>100.0</min_intensity>
          </plugin>
      </sensor>
  </gazebo>


        <!-- RGB CAMERA -->
  <link name="rgb_camera_link_frame">
  </link>

  <joint name="rgb_camera_link_frame_joint" type="fixed">
      <origin rpy="0 0 0" xyz="0.051 0.0 0.05"/>
      <parent link="arm_link_wr1" />
      <child link="rgb_camera_link_frame" />
      <axis xyz="0 0 0"/>
  </joint>

        <!--gazebo reference="rgb_camera_link_frame">
            <sensor name="camera" type="wideanglecamera">
            <camera>
                <horizontal_fov>6.283</horizontal_fov>
                    <image>
                        <width>320</width>
                        <height>240</height>
                    </image>
                    <clip>
                        <near>0.1</near>
                        <far>100</far>
                    </clip>
                    <lens>
                        <type>custom</type>
                        <custom_function>
                            <c1>1.05</c1>
                            <c2>4</c2>
                            <f>1.0</f>
                            <fun>tan</fun>
                        </custom_function>
                        <scale_to_hfov>true</scale_to_hfov>
                        <cutoff_angle>3.1415</cutoff_angle>
                        <env_texture_size>512</env_texture_size>
                    </lens>
                    <always_on>1</always_on>
                    <update_rate>30</update_rate>
            </camera>
            <plugin name="camera_controller" filename="libgazebo_ros_camera.so">
                <cameraName>rgb_camera</cameraName>
                <imageTopicName>image_raw</imageTopicName>
                <cameraInfoTopicName>camera_info</cameraInfoTopicName>
                <frameName>rgb_camera_link_frame</frameName>
                <hackBaseline>0.07</hackBaseline>
            </plugin>
            </sensor>
    </gazebo-->

        <!-- *********************** CAMERA SETUP *********************************  -->
<!-- Each sensor must be attached to a link.                              -->
        <joint name="camera_joint" type="fixed">
            <parent link="arm_link_wr1"/>
            <child link="camera_link"/>
            <origin xyz="0.14 0.0 0.02" rpy="0 0 0"/>
        </joint>

        <link name="camera_link">
            <visual>
                <geometry>
                    <box size="0.010 0.03 0.03"/>
                </geometry>
            </visual>
        </link>


    <joint name="camera_optical_joint" type="fixed">
        <parent link="camera_link"/>
        <child link="camera_link_optical"/>
        <origin xyz="0 0 0" rpy="${-pi/2} 0 ${-pi/2}"/>
    </joint>

    <link name="camera_link_optical"></link>

        <gazebo reference="camera_link">

            <sensor name="camera" type="camera">
                <pose> 0 0 0 0 0 0 </pose>
                <visualize>false</visualize>
                <update_rate>30</update_rate>
                <camera>
                    <horizontal_fov>1.089</horizontal_fov>
                    <image>
                        <format>R8G8B8</format>
                        <width>640</width>
                        <height>480</height>
                    </image>
                    <clip>
                        <near>0.05</near>
                        <far>8.0</far>
                    </clip>
                </camera>
            <plugin name="camera_controller" filename="libgazebo_ros_camera.so">
                <frame_name>camera_link_optical</frame_name>
            </plugin>
        </sensor>
    </gazebo>
        <!--gazebo reference="camera_link">
            <sensor name="camera" type="camera">
                <update_rate>30.0</update_rate>
                <always_on>1</always_on>
                <camera name="camera">
                    <horizontal_fov>1.3962634</horizontal_fov>
                    <image>
                        <width>480</width>
                        <height>360</height>
                        <format>R8G8B8</format>
                    </image>
                    <clip>
                        <near>0.01</near>
                        <far>20</far>
                    </clip>
                    <distortion>
                        <k1>0.0</k1>
                        <k2>0.0</k2>
                        <k3>0.0</k3>
                        <p1>0.0</p1>
                        <p2>0.0</p2>
                        <center>0.5 0.5</center>
                    </distortion>
                </camera>
                <plugin filename="libgazebo_ros_camera.so" name="camera_controller">
                    <ros> <namespace>/robot1</namespace>
                        <remapping>~/image_raw:=camera1/image</remapping>
                        <remapping>~/camera_info:=camera1/camera_info</remapping>
                    </ros>
                    <camera_name>camera_low</camera_name>
                    <frame_name>camera_link</frame_name>
                </plugin>
            </sensor>
        </gazebo-->




        <!-- Standard accessories. -->
        <!--xacro:include filename="$(find spot_description)/urdf/accessories.urdf.xacro" /-->

        <!-- Optional custom includes. -->
        <!--xacro:include filename="$(optenv SPOT_URDF_EXTRAS empty.urdf)" /-->


    </xacro:macro>
</robot>
